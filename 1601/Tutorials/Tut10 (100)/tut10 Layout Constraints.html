<!DOCTYPE html>
<html>
<head>
<title>COMP1601</title>
<link href="template.css" rel="stylesheet" type="text/css" />
<style>
body {
	font-family: arial;
	margin-left: 80px;
}
p {
	font-size:24px;
}
pre {font-size:20px;}
hr {
	width: 100%;
	height: 2px;
	
	margin-top:10px;
	margin-bottom:10px
}
.header {
	text-align: center;
	font-weight: bold;
	font-size: 40px;
	
	margin-top:0px;
	margin-bottom:0px;
	
	color: rgb(153, 0, 0);
}
.subheader {
	color: #000099;
	
	margin-bottom:100px;
}
.segment-header {
	color: rgb(0, 0, 153);
	font-size: 30px;
}
.black-bold {
	color: rgb(0,0,0);
	font-weight: bold;
}
.glossary-term {
	font-weight: 700;
	color: #000099;
}
.code {
	font-family: 'Courier New';
}
.comment {
	color:rgb(0, 128, 0);
}
ul li {
	margin-bottom: 5px;
	font-size:24px;
}.red {
	color: #F00;
}
</style>
</head>
<body>
<p class="header">COMP 1601 Winter 2020</p>
<p class="header subheader">Tut10 -Layout Constraints</p>
<p>&copy; L.D. Nel 2020</p>
<hr/>
<p class="red">Revisions:</p>
<hr/>
<p class="segment-header">Description</p>
<p>In this tutorial we will explore using Layout Contraints to lay out the user interface components of a new app.</p>
<p>We are going to start a new project to build a Tip 'N' Tax calculator. In this tutorial we will just build the layout.</p>
<p>&nbsp;</p>
<p class="red">You need to demonstrate your exercise to the TA or Prof. before you leave the class to get credit for it. If you complete, or make significant progress on the exercise you will get a mark of 2. If you make some progress you will get a mark of 1 and can &quot;upgrade&quot; that mark to a 2 by showing your completed work within one week of this exercise. 0 marks for a no-show or unsufficient progress.</p>
<hr/>
<p class="segment-header">Demo Code</p>
<p>We are starting from scratch so there is no demo code with the exercise. The idea here is to explore the graphical layout possibilities in Android Studio. It is intended that you explore and discover things. Only a bit of basic information is provided here.</p>
<p class="red">[Note the screen captures are from Android Studio 3.3.x, You 3.5.x experience might be slightly different.]</p>
<p>&nbsp;</p>
<p class="segment-header">Preliminary:</p>
<p>Create a new folder called <span class="code">TipNTax</span> to hold a new project.</p>
<p>Create a new Android project with the following constraints (review tutorial 02 if necessary to do this):</p>
<ul>
  <li>Phone/Tablet app</li>
  <li>Select Generate Layout</li>
  <li>Based on  Empty Activity</li>
  <li>Modify the created project to use API level 28, min API level 24</li>
</ul>

<p>&nbsp;</p>
<hr>
<p class="segment-header">&nbsp;</p>
<p class="segment-header">Problem 1: Layout Resources</p>
<p>Open the layout resource activity_main.xml. It should look something like this (in <span class="black-bold">Text</span> view):</p>
<p><img src="images/problem1-1.png" width="1042" height="366" alt=""/></p>
<p>&nbsp;</p>
<p>Notice the generated layout is using a <span class="code">ConstraintLayout</span> XML element. In this tutorial we will explore this and generate new UI using layout constraints. Switch over to <span class="black-bold">Design</span> view. It should look like this:</p>
<p>&nbsp;</p>
<p><img src="images/problem1-2.png" width="882" height="730" alt=""/></p>
<p>&nbsp;</p>
<p>In the previous project we used nested layouts coded manually with XML. For example text views and buttons were nested inside linear layouts. The nesting controlled where items were layed out. Linear layouts could specify horizontally or vertically flowed components. </p>
<p>More recently  Android 7 has added constraint layouts. These are inspired by how CSS is used to style HTML web page markup. A key feature is that the layout is independent of the nesting of the component XML (Just like CSS can style HTML elements regardless of how they are nested in the HTML. The idea is that component layout can be made independent ot the XML nesting and also be done visually. You will be using the <span class="black-bold">Design</span> view most of the time instead of the <span class="black-bold">Text</span> view. Flip back and forth between them though so you can see what affect the visual editing has on the XML.</p>
<p>Click on the TextView in the blue print view [1]. It should open the properites view on the right. </p>
<p><img src="images/problem1-3.png" width="1079" height="703" alt=""/></p>
<p>Notice the squiggly constraints attached to the four sides of the <span class="code">TextView</span>. These are meant to look like springs. The metaphore here is that the four springs are each tugging the <span class="code">TextView</span> towards their other end. The net result is that the tugging is balanced when the <span class="code">TextView</span> is in the centre. </p>
<p>Click on the  <span class="black-bold">constraint handle</span> at the bottom of the text view choose <span class="black-bold">Delete Connection</span>. You have just cut the bottom &quot;spring&quot; and so the <span class="code">TextView</span> is &quot;pulled&quot; to the top:</p>
<p><img src="images/problem1-4.png" width="738" height="591" alt=""/></p>
<p>&nbsp;</p>
<p>To re-attach the bottom spring click the + sign for the bottom constraint in the properties view to create a new constraint. Set the constraint's margin to 0 like the other constraints and it should re-centre the text view:</p>
<p><img src="images/problem1-5.png" width="307" height="240" alt=""/>&nbsp;&nbsp;&nbsp;&nbsp;  <img src="images/problem1-6.png" width="292" height="228" alt=""/>&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/problem1-7.png" width="177" height="292" alt=""/></p>

<p>&nbsp;</p>
<p>This should give you an idea of how the constraints layout works.</p>
<p>Next toggle the component size constraints (shown inside the components box). The possibilities are: <span class="black-bold">fixed</span>, <span class="black-bold">match constraint</span>, and <span class="black-bold">wrap content</span>. See what affect it has on the size of the <span class="code">TextView</span>:</p>
<p><img src="images/problem1-8.png" width="300" height="240" alt=""/>
	&nbsp;&nbsp;&nbsp;
	<img src="images/problem1-9.png" width="306" height="246" alt=""/>
	&nbsp;&nbsp;&nbsp;
	<img src="images/problem1-10.png" width="301" height="243" alt=""/></p>
<p>By now you should have an impression of how this layout metaphor works. Next we will use the visual constraints tool to design our layout for our next app.</p>
<p>&nbsp;</p>
<hr>
<p class="segment-header">&nbsp;</p>
<p class="segment-header">Problem 2: Tip 'N' Tax Calculator</p>
<p>Imagine an app whose main screen allows you to visit the website of a restaurant, enter the amount of your restaurant bill, calculate the tip and tax based on the amount and email those details to yourself. So as a first attempt we will assume the following components:</p>
<ul>
  <li>EditText -to represent the url to visit</li>
  <li>Button -to launch a browser to visit  the url</li>
  <li>EditText -to enter an amount (your restuarant bill)</li>
  <li>Button - to trigger tip and tax calculation</li>
  <li>TextView -to show total of calculation</li>
  <li>EditText -to enter an email address</li>
  <li>EditText -to enter email message content</li>
  <li>Button - to send email</li>
</ul>
<p>For this exercise we want you to lay out these components. Make a sketch on a piece of paper of what you might want this too look like.</p>
<p>Define the string constants you think you will need to label the various components. Add the following to the <span class="code">res.value.string</span> XML resources (make whatever changes you might like if you don't like these):</p>
<pre>&lt;string&#32;name="calculate_button_name"&gt;Calculate&lt;/string&gt;<br>&lt;string&#32;name="browser_button_name"&gt;Visit&lt;/string&gt;<br>&lt;string&#32;name="send_email_button_name"&gt;Send&lt;/string&gt;<br>&lt;string&#32;name="amount_prompt"&gt;amount&lt;/string&gt;<br>&lt;string&#32;name="total_label"&gt;total&lt;/string&gt;<br>&lt;string&#32;name="url_prompt"&gt;http://go.here.org&lt;/string&gt;<br>&lt;string&#32;name="email_address_prompt"&gt;Louis@cmail.ca&lt;/string&gt;<br>&lt;string&#32;name="email_message_prompt"&gt;message&#32;content&lt;/string&gt;</pre>

<p>&nbsp;</p>
<hr>
<p>&nbsp;</p>
<p class="segment-header">Problem 3: Layout</p>
<p>Start by clicking on the &quot;Hello World&quot; <span class="code">TextView</span> to select it and then delete it. We will start this part from a blank blueprint.</p>
<p>Drag a <span class="code">Button</span> from the pallete <span class="black-bold">Widgets/Button</span> and an <span class="code">EditText</span> from <span class="black-bold">Text/Plain Text</span> to the blueprint area. Where you put them is not really important because we will do that with constraints:</p>
<p><img src="images/problem2-1.png" width="963" height="690" alt=""/></p>
<p>&nbsp;</p>
<p>To assign the <span class="code">res.layout.string</span> resources to a component click on the component and then browse for the string resource from the properties view on the right:</p>
<p><img src="images/problem2-1B.png" width="359" height="239" alt=""/></p>
<p>&nbsp;</p>
<p>Check the XML that is being generated as you go (keep flipping back and forth during the exercise):</p>
<p><img src="images/problem2-2.png" width="695" height="516" alt=""/></p>
<p>You will get some constraints errors because we are not done yet.</p>
<p>When you click on a component in the blueprint it has <span class="black-bold">resize</span> handles (squares at the corners) and <span class="black-bold">constraint</span> handles (circles at midpoints along the sides). Constrain the <span class="code">EditText</span> and <span class="code">Button</span> to be attached to the left border of the app by dragging from the left constraint handle to the left border.</p>
<p><img src="images/problem2-4.png" width="270" height="229" alt=""/>&nbsp;&nbsp;&nbsp;<img src="images/problem2-5.png" width="264" height="212" alt=""/></p>
<p>&nbsp;</p>
<p>Similarly constrain the <span class="code">EditText</span> to the top border and then the constrain the <span class="code">Button</span> to the bottom of the <span class="code">EditText</span> by dragging from the  <span class="code">Button</span>'s top constraint handle to the <span class="code">EditText</span>'s bottom constraint handle:</p>
<p><img src="images/problem2-6.png" width="725" height="307" alt=""/></p>
<p>&nbsp;</p>
<hr>
<p>&nbsp;</p>
<p class="segment-header">Problem 4: Finish The Layout</p>
<p>Finish laying out the complete app to your liking and experiment with the constraint layout tool. It's quite new in Android Studio and people seem to really like it. Read more about it here: <a href="https://developer.android.com/training/constraint-layout/index.html">https://developer.android.com/training/constraint-layout/index.html</a>. If you come across good resources on using this tool let us know so we can post some more.</p>
<p>When you are done run your app and demonstrate it to the TA.</p>
<p>&nbsp;</p>
<p><span class="red">When you have completed these problems demonstrate your code to  the TA or Prof. to get credit for the tutorial.</span> </p>
<p>&nbsp;</p>

</body>
</html>
